<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Perfil de Paciente</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* === ESTILOS GERAIS (COPIADO DO PSIC√ìLOGO) ‚Äî COM PALETA APLICADA === */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Poppins', sans-serif;
}

body {
    background: url('https://images.pexels.com/photos/53594/lake-sunrise-fog-morning-53594.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1') no-repeat center center/cover;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    background-color: #cdddec; /* cor de fundo principal */
    padding: 20px;
    transition: background-color 0.3s ease, color 0.3s ease;
}

.container {
    display: flex;
    flex-direction: column;
    width: 90%;
    max-width: 1200px;
    height: auto;
    max-height: 90vh;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
    border-radius: 15px;
    overflow: hidden;
    background: rgba(255, 255, 255, 0.95); /* cards brancos */
    backdrop-filter: blur(5px);
    border: 1px solid rgba(170, 190, 209, 0.6);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.container:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
}

/* Barra Lateral (Sidebar) */
.sidebar {
    width: 100%;
    background: linear-gradient(135deg, #83b1d5 0%, #cdddec 100%); /* nova paleta */
    padding: 30px 20px;
    color: #ffffff;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
}

.profile-avatar {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    margin-bottom: 15px;
    object-fit: cover;
    border: 4px solid rgba(255, 255, 255, 0.6);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.12);
}

.sidebar h2 {
    font-size: 1.8em;
    margin-bottom: 5px;
    color: #ffffff;
}

.contact-info p {
    margin-bottom: 10px;
    font-size: 1em;
    color: rgba(255,255,255,0.95);
}

/* Conte√∫do Principal (Main Content) */
.main-content {
    width: 100%;
    padding: 30px;
    overflow-y: auto;
    background: transparent; /* container j√° branco */
}

.main-content h1 {
    text-align: center;
    margin-bottom: 30px;
    color: #2c3e50;
    font-weight: 600;
    position: relative;
}

/* Bot√µes e Navega√ß√£o */
button,
.navigate {
    padding: 14px;
    border-radius: 15px; /* aplicado: 15px */
    background: linear-gradient(135deg, #83b1d5 0%, #cdddec 100%); /* prim√°rio -> secund√°rio */
    color: #ffffff;
    border: none;
    font-weight: 500;
    text-align: center;
    transition: all 0.3s ease;
    display: inline-block;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(131, 177, 213, 0.28);
    font-size: 16px;
    text-decoration: none;
    width: 100%;
    margin-top: 15px;
}

.navigate {
    margin-top: 30px;
    text-transform: uppercase;
}

/* Hover: inverte para secund√°rio claro com texto escuro */
button:hover,
.navigate:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 15px rgba(131, 177, 213, 0.32);
    background: linear-gradient(135deg, #cdddec 0%, #ffffff 100%);
    color: #2c3e50;
}

/* Estilo da Tabela de Atendimentos */
.atendimentos-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    background: var(--table-bg, #ffffff);
    border-radius: 8px;
    overflow: hidden;
}

.atendimentos-table th,
.atendimentos-table td {
    border: 1px solid rgba(170, 190, 209, 0.6);
    padding: 12px;
    text-align: left;
}

.atendimentos-table th {
    background-color: #83b1d5; /* cabe√ßalho na cor prim√°ria */
    color: #ffffff;
    font-weight: 600;
}

.atendimentos-table tr:nth-child(even) td {
    background: #f7fbfd; /* leve varia√ß√£o para linhas pares */
}

.no-data {
    text-align: center;
    padding: 20px;
    color: #666;
}

/* Feedback button ‚Äî seguir paleta (usei prim√°ria) */
.feedback-btn {
    background: linear-gradient(135deg, #83b1d5 0%, #cdddec 100%);
    color: #ffffff;
    padding: 8px 12px;
    border-radius: 15px; /* aplicado */
    text-decoration: none;
    display: inline-block;
    font-size: 0.9em;
    transition: background 0.3s, color 0.3s;
    box-shadow: 0 4px 10px rgba(131, 177, 213, 0.25);
}
.feedback-btn:hover {
    background: linear-gradient(135deg, #cdddec 0%, #ffffff 100%);
    color: #2c3e50;
}

/* ================= ACESSIBILIDADE CSS - ABRIR PARA CIMA (INALTERADO) ================= */
/* Bot√£o Mestre (Inferior Direito) */
.acessibilidade-toggle {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 10000;
    transition: all 0.2s ease;
}

.acessibilidade-toggle:hover {
    transform: scale(1.05);
}

/* Painel dos Bot√µes (Abertura para CIMA) */
.acessibilidade-panel {
    position: fixed;
    bottom: 80px;
    right: 20px;
    display: flex;
    flex-direction: column-reverse;
    gap: 15px;
    z-index: 9999;
    visibility: hidden;
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.3s ease, transform 0.3s ease, visibility 0.3s;
}

.acessibilidade-panel.show {
    visibility: visible;
    opacity: 1;
    transform: translateY(0);
}

/* === MODO ESCURO (Aplica√ß√£o Universal) === */
body.dark-mode {
    background-color: #121212 !important;
    color: #e0e0e0 !important;
    background-image: none !important;
}

body.dark-mode .container {
    background: rgba(30, 30, 30, 0.95) !important;
    color: #e0e0e0 !important;
}

body.dark-mode .main-content {
    background-color: #1e1e1e !important;
    color: #e0e0e0 !important;
}

body.dark-mode .sidebar {
    background: #1e1e1e !important;
}

body.dark-mode .atendimentos-table th {
    background-color: #333 !important;
    color: #e0e0e0 !important;
}

/* Dark Mode para Bot√µes de Acessibilidade (apenas cores) ‚Äî mantido */
body.dark-mode .acessibilidade-toggle,
body.dark-mode .acessibilidade-panel button,
body.dark-mode .acessibilidade-panel a {
    background: #444 !important;
    color: #eee !important;
    border-color: #666 !important;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3) !important;
}

body.dark-mode .acessibilidade-toggle:hover,
body.dark-mode .acessibilidade-panel button:hover,
body.dark-mode .acessibilidade-panel a:hover {
    background: #555 !important;
    border-color: #777 !important;
    color: white !important;
}

/* Media Queries para Desktop */
@media (min-width: 768px) {
    .container {
        flex-direction: row;
        height: 80vh;
        max-height: 700px;
    }

    .sidebar {
        width: 300px;
        min-width: 250px;
        padding: 40px 30px;
    }

    .main-content {
        width: calc(100% - 300px);
        padding: 40px;
    }
}

    </style>
</head>

<body>
    <button class="acessibilidade-toggle" onclick="toggleAcessibilidadePanel()"
        style="width: 50px; height: 50px; border-radius: 50%; background: #ffffff; color: #333; border: 2px solid #ddd; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); font-size: 1.5rem; padding: 0; display: flex; justify-content: center; align-items: center;">
        <i class="fas fa-universal-access"></i>
    </button>

    <div class="acessibilidade-panel" id="acessibilidadePanel">
        <button id="aumentar-fonte" class="acessibilidade-btn" title="Aumentar Fonte"
            style="background: #ffffff; color: #333; border: 2px solid #ddd; border-radius: 50%; width: 45px; height: 45px; min-width: 45px; padding: 0; font-size: 1.1rem; font-weight: 600;">
            A+
        </button>
        <button id="diminuir-fonte" class="acessibilidade-btn" title="Diminuir Fonte"
            style="background: #ffffff; color: #333; border: 2px solid #ddd; border-radius: 50%; width: 45px; height: 45px; min-width: 45px; padding: 0; font-size: 1.1rem; font-weight: 600;">
            A-
        </button>
        <button id="toggle-tema" class="acessibilidade-btn" title="Alternar Tema Escuro"
            style="background: #ffffff; color: #333; border: 2px solid #ddd; border-radius: 50%; width: 45px; height: 45px; min-width: 45px; padding: 0; font-size: 1.1rem; font-weight: 600;">
            üåô
        </button>
        <a href="/home" class="acessibilidade-btn" id="btn-home" title="Voltar para Home"
            style="background: #ffffff; color: #333; border: 2px solid #ddd; border-radius: 50%; width: 45px; height: 45px; min-width: 45px; padding: 0; font-size: 1.1rem; font-weight: 600; display: flex; justify-content: center; align-items: center;">
            <i class="fas fa-home"></i>
        </a>
    </div>

    <div class="container">
        <aside class="sidebar">
            <div class="profile-section">
                <% if (paciente && paciente.foto) { %>
                    <img src="<%= paciente.foto %>" alt="Avatar do Paciente" class="profile-avatar">
                    <% } else { %>
                        <img src="https://via.placeholder.com/120/f39c12/FFFFFF?text=Paciente" alt="Avatar Padr√£o"
                            class="profile-avatar">
                        <% } %>
                            <h2>
                                <%= paciente.nome %>
                            </h2>
                            <p class="profile-title">Paciente</p>
            </div>

            <div class="contact-info">
                <h3>Minhas Infos</h3>
                <p>
                    <i class="fas fa-envelope"></i>
                    <%= paciente.login %>
                </p>
                <p>
                    <i class="fas fa-phone"></i>
                    <%= paciente.telefone %>
                </p>
                <a href="/logout" class="navigate">Sair</a>
            </div>
        </aside>

        <main class="main-content">
            <h1>Hist√≥rico de Atendimentos</h1>

            <table class="atendimentos-table">
                <thead>
                    <tr>
                        <th>Psic√≥logo(a)</th>
                        <th>Data</th>
                        <th>A√ß√£o</th>
                    </tr>
                </thead>
                <tbody>
                    <% if (atendimentos && atendimentos.length > 0) { %>
                        <% atendimentos.forEach(atendimento => { %>
                            <tr>
                                <td>
                                    <%= atendimento.psicologo_nome %>
                                </td>
                                <td>
                                    <%= new Date(atendimento.data_inicio).toLocaleDateString('pt-BR') %>
                                </td>
                                <td>
                                    <a href="/feedback?atendimento_id=<%= atendimento.id %>" class="feedback-btn">
                                        Avaliar Atendimento
                                    </a>
                                </td>
                            </tr>
                            <% }); %>
                                <% } else { %>
                                    <tr>
                                        <td colspan="3" class="no-data">Nenhum atendimento encontrado.</td>
                                    </tr>
                                    <% } %>
                </tbody>
            </table>
        </main>
    </div>

    <script>
        // L√≥gica para mostrar/esconder o painel de acessibilidade
        function toggleAcessibilidadePanel() {
            const panel = document.getElementById('acessibilidadePanel');
            panel.classList.toggle('show');
        }

        // Elementos de acessibilidade
        const toggleTemaBtn = document.getElementById("toggle-tema");
        const aumentarFonteBtn = document.getElementById("aumentar-fonte");
        const diminuirFonteBtn = document.getElementById("diminuir-fonte");

        // L√≥gica de Modo Escuro
        toggleTemaBtn.addEventListener("click", () => {
            document.body.classList.toggle("dark-mode");
            const isDark = document.body.classList.contains("dark-mode");
            localStorage.setItem("modoEscuro", isDark);
            toggleTemaBtn.textContent = isDark ? "‚òÄÔ∏è" : "üåô";
        });

        // L√≥gica de Fonte
        let fontSize = 16;

        function ajustarFonte(tamanho) {
            document.querySelectorAll('body, h1, h2, h3, p, a, button, table, th, td').forEach(el => {
                el.style.fontSize = `${tamanho}px`;
            });
        }

        aumentarFonteBtn.addEventListener("click", () => {
            if (fontSize < 24) {
                fontSize += 2;
                ajustarFonte(fontSize);
            }
        });

        diminuirFonteBtn.addEventListener("click", () => {
            if (fontSize > 10) {
                fontSize -= 2;
                ajustarFonte(fontSize);
            }
        });

        // Carregar estado ao iniciar
        window.addEventListener("DOMContentLoaded", () => {
            if (localStorage.getItem("modoEscuro") === "true") {
                document.body.classList.add("dark-mode");
                toggleTemaBtn.textContent = "‚òÄÔ∏è";
            }
        });
    </script>
</body>

</html>